<!DOCTYPE html>
<html lang="pt-BR">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Poligera</title>
    <!-- Booststrap -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-rbsA2VBKQhggwzxH7pPCaAqO46MgnOM80zW1RWuH61DGLwZJEdK2Kadq2F9CUG65" crossorigin="anonymous">
    <!-- Arquivo CSS -->
    <link rel="stylesheet" href="css/style.css">
    <!-- Fontes -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Inter:ital,opsz,wght@0,14..32,100..900;1,14..32,100..900&display=swap"
        rel="stylesheet">
        <!-- elétrica, moléculas, vetor -->
    <style>
        .fisica-eletrica .item,
        .conteudo-fisica.eletrica .item,
        .fisica-eletrica .icone-item,
        .conteudo-fisica.eletrica .item-mobile-icon,

        .fisica-mecanica .item.selecionavel,
        .conteudo-fisica.mecanica .item.selectable,
        .fisica-mecanica .icone-item.selecionavel,
        .conteudo-fisica.mecanica .item-mobile-icon.selectable,

        .quimica .item,
        .conteudo-quimica .item,
        .quimica .icone-item,
        .conteudo-quimica .item-mobile-icon {
            position: relative;
        }



        .controle-quantidade,
        .multi-control {
            position: absolute;
            top: 6px;
            right: 6px;
            display: inline-flex;
            align-items: center;
            gap: 4px;
            z-index: 6;
        }


        .botao-contador,
        .multi-control .multi-btn {
            width: 26px;
            height: 26px;
            border-radius: 50%;
            background: #0d6efd;
            color: #fff;
            border: none;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 700;
            font-size: 14px;
            cursor: pointer;
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.25);
            line-height: 1;
        }


        .valor-contador,
        .multi-control .multi-count {
            min-width: 26px;
            height: 26px;
            border-radius: 14px;
            background: #ffffff;
            color: #0d6efd;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            font-weight: 700;
            font-size: 12px;
            padding: 0 6px;
            box-shadow: 0 1px 2px rgba(0, 0, 0, 0.12);
        }

       
        .icone-item .controle-quantidade,
        .item-mobile-icon .multi-control,
        .icone-item .multi-control {
            top: 4px;
            right: 4px;
        }

        .icone-item .botao-contador,
        .item-mobile-icon .multi-control .multi-btn {
            width: 22px;
            height: 22px;
            font-size: 12px;
        }

        .icone-item .valor-contador,
        .item-mobile-icon .multi-control .multi-count {
            min-width: 20px;
            height: 20px;
            font-size: 11px;
            border-radius: 10px;
            padding: 0 5px;
        }

   
        .item.selecionado,
        .icone-item.selecionado,
        .item.multi-selected,
        .item-mobile-icon.multi-selected,
        .valor-contador.selecionado,
        .multi-control .multi-selected {
            outline: 2px solid rgba(13, 110, 253, 0.35);
            border-radius: 6px;
        }
    </style>

</head>

<body class="d-flex flex-column vh-100">
    <header class="mobile-header d-flex align-items-center p-3 d-md-none">
        <button class="tres-pontos">
            <img src="images/3 pontos - icon.png" alt="tres-pontos" class="icone" id="icone-tres-pontos">
        </button>
    </header>
    <div class="d-flex flex-row flex-grow-1" style="overflow-y: auto;">
        <aside class="barra-lateral d-none d-md-flex">
            <header class="menu-header">
                <h2 class="aba ativa" id="aba-criacao">
                    Criação
                    <img src="images/creation-icon.png" alt="icone criacao" class="icone" id="icone-criacao">
                </h2>
                <h2 class="aba" id="aba-historico">
                    Histórico
                    <img src="images/history-icon.png" alt="icone historico" class="icone" id="icone-historico">
                </h2>
            </header>

            <section class="requerimentos" id="conteudo-criacao">
                <div class="botoes-areas">
                    <button class="botao botao-fisica">Física</button>
                    <button class="botao botao-quimica">Química</button>
                    <select class="select-areas visually-hidden" id="areas">
                        <option value="" selected disabled hidden>Áreas</option>
                        <option value="mecanica">Mêcanica</option>
                        <option value="eletrica">Elétrica</option>
                        <option value="optica">Óptica</option>
                    </select>
                    <div class="combobox-customizado-container">
                        <div class="combobox-customizado">Áreas</div>
                        <ul class="opcoes">
                            <li data-value="mecanica">
                                <img src="images/mecânica - icon.png" alt="icone-mecanica" id="icone-mecanica">
                                Mêcanica
                            </li>
                            <li data-value="eletrica">
                                <img src="images/elétrica - icon.png" alt="icone-eletrica" id="icone-eletrica">
                                Elétrica
                            </li>
                            <li data-value="optica">
                                <img src="images/óptica - icon.png" alt="icone-optica" id="icone-optica">
                                Óptica
                            </li>
                        </ul>
                    </div>
                </div>
                <div class="itens-container">
                    <div class="conteudo-fisica mecanica">
                        <div class="item selectable">
                            <button class="itens"><img src="images/icone-vetor.png" alt="vetor"></button>
                            <p>Vetor</p>
                        </div>
                        <div class="item">
                            <button class="itens"><img src="images/icone-forca_peso.png" alt="forca_peso"></button>
                            <p>Força Peso</p>
                        </div>
                        <div class="item">
                            <button class="itens"><img src="images/icone-forca_normal.png" alt="forca_normal"></button>
                            <p>Força Normal</p>
                        </div>
                        <div class="item">
                            <button class="itens"><img src="images/icone-forca_tracao.png" alt="forca_tracao"></button>
                            <p>Força de Tração</p>
                        </div>
                        <div class="item">
                            <button class="itens"><img src="images/icone-forca_atrito.png" alt="forca_atrito"></button>
                            <p>Força de Atrito</p>
                        </div>
                        <div class="item">
                            <button class="itens"><img src="images/icone-forca_auxiliar.png"
                                    alt="forca_auxiliar"></button>
                            <p>Força Auxiliar</p>
                        </div>
                        <div class="item">
                            <button class="itens"><img src="images/icone-bloco.png" alt="bloco"></button>
                            <p>Bloco</p>
                        </div>
                        <div class="item">
                            <button class="itens"><img src="images/icone-plano_inclinado.png"
                                    alt="plano_inclinado"></button>
                            <p>Plano Inclinado</p>
                        </div>
                        <div class="item">
                            <button class="itens"><img src="images/icone-pendulo.png" alt="pendulo"></button>
                            <p>Pêndulo</p>
                        </div>
                        <div class="item">
                            <button class="itens"><img src="images/icone-polia.png" alt="polia"></button>
                            <p>Polia</p>
                        </div>
                    </div>

                    <div class="conteudo-fisica eletrica">
                        <div class="item">
                            <button class="itens"><img src="images/chave-icon.png" alt="chave"></button>
                            <p>Chave</p>
                        </div>
                        <div class="item">
                            <button class="itens"><img src="images/resistor - icon.png" alt="resistor"></button>
                            <p>Resistor</p>
                        </div>
                        <div class="item">
                            <button class="itens"><img src="images/capacitor - icon.png" alt="capacitor"></button>
                            <p>Capacitor</p>
                        </div>
                        <div class="item">
                            <button class="itens"><img src="images/ddp - icon.png" alt="ddp"></button>
                            <p>DDP</p>
                        </div>
                        <div class="item">
                            <button class="itens"><img src="images/voltimetro - icon.png" alt="voltimetro"></button>
                            <p>Voltímetro</p>
                        </div>
                        <div class="item">
                            <button class="itens"><img src="images/amperímetro - icon.png" alt="amperimetro"></button>
                            <p>Amperímetro</p>
                        </div>
                    </div>

                    <div class="conteudo-fisica optica">
                        <div class="item">
                            <button class="itens"><img src="images/icone-espelho_plano.png"
                                    alt="espelho_plano"></button>
                            <p>Espelho Plano</p>
                        </div>
                        <div class="item">
                            <button class="itens"><img src="images/icone-espelho_concavo.png"
                                    alt="espelho_concavo"></button>
                            <p>Espelho Côncavo</p>
                        </div>
                        <div class="item">
                            <button class="itens"><img src="images/icone-espelho_convexo.png"
                                    alt="espelho_convexo"></button>
                            <p>Espelho Convexo</p>
                        </div>
                        <div class="item">
                            <button class="itens"><img src="images/icone-lente_convergente.png"
                                    alt="lente_convergente"></button>
                            <p>Lente Convergente</p>
                        </div>
                        <div class="item">
                            <button class="itens"><img src="images/icone-lente_divergente.png"
                                    alt="lente_divergente"></button>
                            <p>Lente Divergente</p>
                        </div>
                    </div>

                    <div class="conteudo-quimica">
                        <div class="item">
                            <button class="itens"><img src="images/icone-elemento_carbono.png" alt="carbono"></button>
                            <p>Carbono</p>
                        </div>
                        <div class="item">
                            <button class="itens"><img src="images/icone-elemento_hidrogenio.png"
                                    alt="hidrogenio"></button>
                            <p>Hidrogênio</p>
                        </div>
                        <div class="item">
                            <button class="itens"><img src="images/icone-elemento_oxigenio.png" alt="oxigenio"></button>
                            <p>Oxigênio</p>
                        </div>
                        <div class="item">
                            <button class="itens"><img src="images/icone-elemento_nitrogenio.png"
                                    alt="nitrogenio"></button>
                            <p>Nitrogênio</p>
                        </div>
                        <div class="item">
                            <button class="itens"><img src="images/icone-elemento_fosforo.png" alt="fosforo"></button>
                            <p>Fósforo</p>
                        </div>
                        <div class="item">
                            <button class="itens"><img src="images/icone-elemento_fluor.png" alt="fluor"></button>
                            <p>Flúor</p>
                        </div>
                        <div class="item">
                            <button class="itens"><img src="images/icone-elemento_cloro.png" alt="cloro"></button>
                            <p>Cloro</p>
                        </div>
                        <div class="item">
                            <button class="itens"><img src="images/icone-elemento_bromo.png" alt="bromo"></button>
                            <p>Bromo</p>
                        </div>
                        <div class="item">
                            <button class="itens"><img src="images/icone-elemento_iodo.png" alt="iodo"></button>
                            <p>Iodo</p>
                        </div>
                        <div class="item">
                            <button class="itens"><img src="images/icone-elemento_enxofre.png" alt="enxofre"></button>
                            <p>Enxofre</p>
                        </div>
                        <div class="item">
                            <button class="itens"><img src="images/icone-ligacao_tripla.png"
                                    alt="ligacao_tripla"></button>
                            <p>Ligação Tripla</p>
                        </div>
                        <div class="item">
                            <button class="itens"><img src="images/icone-ligacao_dupla.png"
                                    alt="ligacao_dupla"></button>
                            <p>Ligação Dupla</p>
                        </div>
                        <div class="item">
                            <button class="itens"><img src="images/icone-ligacao_simples.png"
                                    alt="ligacao_simples"></button>
                            <p>Ligação Simples</p>
                        </div>
                    </div>
                </div>
            </section>

            <section class="historicos hidden" id="conteudo-historico">
                <button>exemplo1</button>
                <button>exemplo1</button>
                <button>exemplo1</button>
                <button>exemplo1</button>
                <button>exemplo1</button>
                <button>exemplo1</button>
                <button>exemplo1</button>
            </section>

        </aside>

        <main class="conteudo flex-grow-1 position-relative">
            <div class="loading">
                Aguarde um instante, por favor!
            </div>
            <div class="resposta">
            </div>
            <img src="images/Logo poliedro.png" alt="logo" id="logo" class="d-none d-md-block">
            <div class="chat-container">
                <input type="text" id="chat" autocomplete="off">
                <button id="enviar" disabled>
                    <img src="images/Arrow 1.png" alt="enviar">
                </button>
            </div>
        </main>
    </div>

    <footer class="mobile-footer d-flex flex-column p-3 d-md-none">
        <div class="botao-materias row justify-content-center">
            <button class="botao botao-fisica">Física</button>
            <button class="botao botao-quimica">Química</button>
        </div>
        <div class="itens-container-mobile mt-3">
            <div class="itens-container">
                <div class="conteudo-fisica">
                    <div class="icones-scroll-wrapper">
                        <div class="conteudo-fisica mecanica icones-lista">
                            <button class="item-mobile-icon selectable"><img src="images/icone-vetor.png"
                                    alt="vetor"></button>
                            <button class="item-mobile-icon"><img src="images/icone-forca_peso.png"
                                    alt="forca_peso"></button>
                            <button class="item-mobile-icon"><img src="images/icone-forca_normal.png"
                                    alt="forca_normal"></button>
                            <button class="item-mobile-icon"><img src="images/icone-forca_tracao.png"
                                    alt="forca_tracao"></button>
                            <button class="item-mobile-icon"><img src="images/icone-forca_atrito.png"
                                    alt="forca_atrito"></button>
                            <button class="item-mobile-icon"><img src="images/icone-forca_auxiliar.png"
                                    alt="forca_auxiliar"></button>
                            <button class="item-mobile-icon"><img src="images/icone-bloco.png" alt="bloco"></button>
                            <button class="item-mobile-icon"><img src="images/icone-plano_inclinado.png"
                                    alt="plano_inclinado"></button>
                            <button class="item-mobile-icon"><img src="images/icone-pendulo.png" alt="pendulo"></button>
                            <button class="item-mobile-icon"><img src="images/icone-polia.png" alt="polia"></button>
                        </div>

                        <div class="conteudo-fisica eletrica icones-lista">
                            <button class="item-mobile-icon"><img src="images/chave-icon.png" alt="chave"></button>
                            <button class="item-mobile-icon"><img src="images/resistor - icon.png"
                                    alt="resistor"></button>
                            <button class="item-mobile-icon"><img src="images/capacitor - icon.png"
                                    alt="capacitor"></button>
                            <button class="item-mobile-icon"><img src="images/ddp - icon.png" alt="ddp"></button>
                            <button class="item-mobile-icon"><img src="images/voltimetro - icon.png"
                                    alt="voltimetro"></button>
                            <button class="item-mobile-icon"><img src="images/amperímetro - icon.png"
                                    alt="amperimetro"></button>
                        </div>

                        <div class="conteudo-fisica optica icones-lista">
                            <button class="item-mobile-icon"><img src="images/icone-espelho_plano.png"
                                    alt="espelho_plano"></button>
                            <button class="item-mobile-icon"><img src="images/icone-espelho_concavo.png"
                                    alt="espelho_concavo"></button>
                            <button class="item-mobile-icon"><img src="images/icone-espelho_convexo.png"
                                    alt="espelho_convexo"></button>
                            <button class="item-mobile-icon"><img src="images/icone-lente_convergente.png"
                                    alt="lente_convergente"></button>
                            <button class="item-mobile-icon"><img src="images/icone-lente_divergente.png"
                                    alt="lente_divergente"></button>
                        </div>
                    </div>

                    <div class="areas-fisica">
                        <button class="botao-area" data-area="mecanica">
                            <img src="images/mecânica - icon.png" alt="mecanica">
                        </button>
                        <button class="botao-area" data-area="eletrica">
                            <img src="images/elétrica - icon.png" alt="eletrica">
                        </button>
                        <button class="botao-area" data-area="optica">
                            <img src="images/óptica - icon.png" alt="optica">
                        </button>
                    </div>
                </div>

                <div class="conteudo-quimica">
                    <div class="icones-scroll-wrapper">
                        <div class="icones-lista active">
                            <button class="item-mobile-icon"><img src="images/icone-elemento_carbono.png" alt="carbono"></button>
                            <button class="item-mobile-icon"><img src="images/icone-elemento_hidrogenio.png"
                                    alt="hidrogenio"></button>
                            <button class="item-mobile-icon"><img src="images/icone-elemento_oxigenio.png" alt="oxigenio"></button>
                            <button class="item-mobile-icon"><img src="images/icone-elemento_nitrogenio.png"
                                    alt="nitrogenio"></button>
                            <button class="item-mobile-icon"><img src="images/icone-elemento_fosforo.png"
                                    alt="fosforo"></button>
                            <button class="item-mobile-icon"><img src="images/icone-elemento_fluor.png"
                                    alt="fluor"></button>
                            <button class="item-mobile-icon"><img src="images/icone-elemento_cloro.png"
                                    alt="cloro"></button>
                            <button class="item-mobile-icon"><img src="images/icone-elemento_bromo.png"
                                    alt="bromo"></button>
                            <button class="item-mobile-icon"><img src="images/icone-elemento_iodo.png"
                                    alt="iodo"></button>
                            <button class="item-mobile-icon"><img src="images/icone-elemento_enxofre.png"
                                    alt="enxofre"></button>
                            <button class="item-mobile-icon"><img src="images/icone-ligacao_tripla.png"
                                    alt="ligacao_tripla"></button>
                            <button class="item-mobile-icon"><img src="images/icone-ligacao_dupla.png"
                                    alt="ligacao_dupla"></button>
                            <button class="item-mobile-icon"><img src="images/icone-ligacao_simples.png"
                                    alt="ligacao_simples"></button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </footer>
    <!-- axios -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/axios/1.6.0/axios.min.js"></script>
    <!-- javascript: elemntos da tela -->
    <script src="js/script.js"></script>
    <!-- javascript: conexão com o back -->
    <script src="js/conexaoBack.js"></script>
    <script>
       
        document.addEventListener('DOMContentLoaded', function () {

            function atualizarDestaque(host, count) {
               
                if (count > 0) {
                    host.classList.add('selecionado');
                    host.classList.add('multi-selected'); 
                } else {
                    host.classList.remove('selecionado');
                    host.classList.remove('multi-selected');
                }
            }

            function criarControle(host, inicial = 1) {
                
                let existente = host.querySelector('.controle-quantidade, .multi-control');
                if (existente) return existente;

                const grupo = document.createElement('div');
                grupo.className = 'controle-quantidade';
                grupo.classList.add('multi-control');   
                grupo.dataset.count = String(Math.max(0, inicial));

                const botaoMenos = document.createElement('button');
                botaoMenos.type = 'button';
                botaoMenos.className = 'botao-contador botao-menos';
                botaoMenos.classList.add('multi-btn', 'multi-minus'); 
                botaoMenos.title = 'Diminuir';
                botaoMenos.textContent = '−';

                const valor = document.createElement('div');
                valor.className = 'valor-contador';
                valor.classList.add('multi-count'); 
                valor.textContent = grupo.dataset.count;

                const botaoMais = document.createElement('button');
                botaoMais.type = 'button';
                botaoMais.className = 'botao-contador botao-mais';
                botaoMais.classList.add('multi-btn', 'multi-plus');
                botaoMais.title = 'Adicionar';
                botaoMais.textContent = '+';

                botaoMais.addEventListener('click', function (ev) {
                    ev.stopPropagation();
                    let c = parseInt(grupo.dataset.count || '0', 10) + 1;
                    grupo.dataset.count = String(c);
                    valor.textContent = c;
                    atualizarDestaque(host, c);
                });

                botaoMenos.addEventListener('click', function (ev) {
                    ev.stopPropagation();
                    let c = parseInt(grupo.dataset.count || '0', 10) - 1;
                    if (c <= 0) {
                        grupo.remove();
                        atualizarDestaque(host, 0);
                        return;
                    }
                    grupo.dataset.count = String(c);
                    valor.textContent = c;
                    atualizarDestaque(host, c);
                });

                grupo.appendChild(botaoMenos);
                grupo.appendChild(valor);
                grupo.appendChild(botaoMais);

                host.appendChild(grupo);
                atualizarDestaque(host, parseInt(grupo.dataset.count, 10));

                return grupo;
            }

            function incrementarHost(host) {
                
                let grupo = host.querySelector('.controle-quantidade, .multi-control');
                if (!grupo) {
                    criarControle(host, 1);
                    return;
                }
                const valor = grupo.querySelector('.valor-contador, .multi-count');
                let c = parseInt(grupo.dataset.count || '0', 10) + 1;
                grupo.dataset.count = String(c);
                if (valor) valor.textContent = c;
                atualizarDestaque(host, c);
            }

            function ligarIncremento(seletor, resolverHost) {
                document.querySelectorAll(seletor).forEach(function (el) {
                    el.addEventListener('click', function (ev) {
                        
                        if (ev.target.closest('.controle-quantidade, .multi-control')) return;
                        const host = resolverHost ? resolverHost(el) : (el.closest('.item') || el);
                        if (!host) return;
                        incrementarHost(host);
                    });
                });
            }

            
            ligarIncremento('.conteudo-fisica.eletrica .item .itens', function (el) { return el.closest('.item'); });
            ligarIncremento('.conteudo-fisica.eletrica .item-mobile-icon');
            ligarIncremento('.conteudo-quimica .item .itens', function (el) { return el.closest('.item'); });
            ligarIncremento('.conteudo-quimica .item-mobile-icon');
            ligarIncremento('.conteudo-fisica.mecanica .item.selectable .itens', function (el) { return el.closest('.item'); });
            ligarIncremento('.conteudo-fisica.mecanica .item-mobile-icon.selectable');

        });
    </script>
    
    <!-- ícones -->
    <script type="module" src="https://unpkg.com/ionicons@7.1.0/dist/ionicons/ionicons.esm.js"></script>
    <script nomodule src="https://unpkg.com/ionicons@7.1.0/dist/ionicons/ionicons.js"></script>
</body>

</html>